<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <label for="name">Name</label>
    <input type="text" id="name" name="name"><br><br>
    <label for="email">Email</label>
    <input type="text" id="email" name="email"><br><br>
    <label for="age">Age</label>
    <input type="number" id="age" name="age"><br><br>
    <label for="address">Address</label>
    <textarea name="address" id="address" rows="4"></textarea>
    <br><br>
    <button type="button" onclick="createUser()" id="creatbtn">Submit</button>
    <button type="button" onclick="updateUser()" id="updatebtn">Update</button>

    <table border="1" style="width: 100%;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Age</th>
                <th>Address</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <script>
        var users = JSON.parse(localStorage.getItem("users")) || []
        function createUser() {
            var user = {
                name: "",
                email: "",
                age: "",
                address: ""
            }
            for (a in user) {
                user[a] = document.getElementById(a).value;
            }
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users))
            readuser()
            clearUser()
        }

        function clearUser() {
            var user = {
                name: "",
                email: "",
                age: ""
            }
            for (a in user) {
                user[a] = document.getElementById(a).value = '';
            }
        }

        function readuser() {
            document.querySelector("tbody").innerHTML = "";
            users.forEach((std, i) => {
                var tr = document.createElement("tr");
                for (a in std) {
                    var td = document.createElement("td");
                    td.innerHTML = std[a]
                    tr.appendChild(td)
                }
                var edittd = document.createElement("td");
                var editbtn = document.createElement("button");
                editbtn.innerHTML = "'EditUser"
                editbtn.setAttribute("onclick", "editUser(" + i + ")")
                edittd.appendChild(editbtn);
                tr.appendChild(edittd)

                var deltd = document.createElement("td");
                var delbtn = document.createElement("button");
                delbtn.innerHTML = "'DelUser"
                delbtn.setAttribute("onclick", "delUser(" + i + ")")
                deltd.appendChild(delbtn);
                tr.appendChild(deltd)

                document.querySelector("tbody").appendChild(tr);

            })
        }

        var index
        function editUser(i) {
            index = i;
            var userstobeedit = users[i];
            for (a in userstobeedit) {
                document.getElementById(a).value = userstobeedit[a];
            }
            document.getElementById("updatebtn").style.display = "block"
            document.getElementById("creatbtn").style.display = "none"
        }

        function delUser(i) {
            users.splice(i, 1);
            localStorage.setItem('users', JSON.stringify(users))
            readuser()
        }
        readuser()

        function updateUser() {
            var user = {
                name: "",
                email: "",
                age: ""
            }
            for (a in user) {
                user[a] = document.getElementById(a).value;
            }
            users[index] = user;
            localStorage.setItem('users', JSON.stringify(users))
            readuser()
            clearUser()
            document.getElementById("updatebtn").style.display = "none"
            document.getElementById("creatbtn").style.display = "block"
        }


    </script>
</body>

</html>